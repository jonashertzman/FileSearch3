<Window x:Class="FileSearch.MainWindow" 
				xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
				xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
				xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
				xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
				xmlns:local="clr-namespace:FileSearch"
				mc:Ignorable="d" Title="File Search 3 - Alpha" TextOptions.TextFormattingMode="Display" Closed="Window_Closed" Initialized="Window_Initialized" SnapsToDevicePixels="True" ResizeMode="CanResizeWithGrip">



	<Window.Resources>

		<ContextMenu x:Key="ContextMenuFileItem">
			<MenuItem Header="Open Containing Folder"  />
			<MenuItem Header="Copy Path to Clipboard" />
		</ContextMenu>

	</Window.Resources>


	<Window.CommandBindings>
		<CommandBinding Command="local:Commands.Compare"  Executed="CommandCompare_Executed" />
		<CommandBinding Command="local:Commands.SaveLeftFile" Executed="CommandSaveLeftFile_Executed" CanExecute="CommandSaveLeftFile_CanExecute" />
	</Window.CommandBindings>


	<Grid>
		<Grid.Resources>

			<DataTemplate x:Key="ListTemplate">
				<StackPanel Orientation="Vertical">
					<TextBlock Text="{Binding Name}" />
					<TextBox Text="{Binding Name}" />
				</StackPanel>
			</DataTemplate>

			<DataTemplate x:Key="SearcInstenceTabTemplate">
				<Button Click="TabButton_Click" Tag="{Binding}" Style="{StaticResource TabButtonStyle}">
					<StackPanel Margin="2,0" Orientation="Vertical" MinWidth="20">
						<TextBlock Text="{Binding Name}" HorizontalAlignment="Center" Margin="0,0,0,1" />
						<ProgressBar BorderThickness="1" Value="50" Visibility="Visible" />
					</StackPanel>
				</Button>
			</DataTemplate>

		</Grid.Resources>

		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<!--Menu Bar-->
		<Grid x:Name="GridMenu" Margin="0,2,0,0">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition />
			</Grid.ColumnDefinitions>

			<!--Menu-->
			<Border BorderThickness="0,0,0,1" BorderBrush="{StaticResource  {x:Static SystemColors.ScrollBarBrushKey} }">
				<Menu Grid.Row="0" Background="{StaticResource {x:Static SystemColors.WindowBrushKey}}" VerticalAlignment="Center" Margin="2,0">
					<MenuItem Header="File">
						<MenuItem Header="Exit" />
						<MenuItem Header="New Search" />
					</MenuItem>
					<MenuItem Header="Tools">
						<MenuItem Header="Options" />
					</MenuItem>
					<MenuItem Header="Help">
						<MenuItem Header="About" />
					</MenuItem>
				</Menu>
			</Border>

			<!--Instance Tabs-->
			<ItemsControl x:Name="Tab" ItemsSource="{Binding SearchInstances}" Grid.Column="1" Grid.Row="0" ItemTemplate="{StaticResource SearcInstenceTabTemplate}" IsTabStop="False">
				<ItemsControl.ItemsPanel>
					<ItemsPanelTemplate>
						<StackPanel Orientation="Horizontal" />
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>
			</ItemsControl>
			<Button x:Name="ButtonNewSearchInstance" Content="*" Click="ButtonNewSearchInstance_Click" Grid.Column="2" Margin="0,2,0,0" Style="{StaticResource TabButtonStyle}" MinWidth="26" />
			<Border Grid.Column="3" BorderThickness="0,0,0,1" BorderBrush="{StaticResource {x:Static SystemColors.ScrollBarBrushKey}}" />
		</Grid>


		<!--Main Toolbar-->
		<WrapPanel DockPanel.Dock="Top" x:Name="ToolbarMain" Grid.Row="1" Orientation="Horizontal">
			<WrapPanel.Background>
				<LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
					<GradientStop Color="{StaticResource {x:Static SystemColors.WindowColorKey}}" Offset="0" />
					<GradientStop Color="{StaticResource {x:Static SystemColors.ControlColorKey}}" Offset="1" />
				</LinearGradientBrush>
			</WrapPanel.Background>

			<Button Style="{StaticResource ToolbarButton}">
				<StackPanel Orientation="Horizontal">
					<ContentPresenter ContentTemplate="{StaticResource CompareIcon}" Style="{StaticResource CommonButtonIcon}" />
				</StackPanel>
				<Button.ToolTip>
					<ToolTip DataContext="{Binding Path=PlacementTarget, RelativeSource={x:Static RelativeSource.Self}}">
						<StackPanel Orientation="Horizontal">
							<TextBlock Text="{Binding Path=Command.Text}" />
							<TextBlock Text="F5" Style="{StaticResource ShortcutTooltip}" />
						</StackPanel>
					</ToolTip>
				</Button.ToolTip>
			</Button>

			<Button Style="{StaticResource ToolbarButton}">
				<StackPanel Orientation="Horizontal">
					<ContentPresenter ContentTemplate="{StaticResource SaveIcon}" Style="{StaticResource CommonButtonIcon}" />
				</StackPanel>
				<Button.ToolTip>
					<ToolTip DataContext="{Binding Path=PlacementTarget, RelativeSource={x:Static RelativeSource.Self}}">
						<StackPanel Orientation="Horizontal">
							<TextBlock Text="{Binding Path=Command.Text}" />
						</StackPanel>
					</ToolTip>
				</Button.ToolTip>
			</Button>

		</WrapPanel>


		<Grid x:Name="MainGrid" Grid.Row="2">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="133" />
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition />
			</Grid.ColumnDefinitions>

			<!--Search Attributes-->
			<Grid x:Name="GridSearchAttributes">
				<Grid.RowDefinitions>
					<RowDefinition Height="100" />
					<RowDefinition Height="Auto" />
					<RowDefinition Height="100" />
					<RowDefinition Height="Auto" />
					<RowDefinition />
				</Grid.RowDefinitions>
				<DataGrid x:Name="dataGridSearchPhrases" Grid.Row="0" Style="{StaticResource SearchAttributeGrid}" ItemsSource="{Binding ActiveSearchInstance.SearchPhrases}">
					<DataGrid.Columns>
						<DataGridTextColumn Binding="{Binding Text}" CellStyle="{StaticResource DataGridCell}" Header="Phrase" CanUserResize="False" Width="*" />
					</DataGrid.Columns>
				</DataGrid>
				<GridSplitter Grid.Row="1" Height="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" Focusable="False" />
				<DataGrid x:Name="dataGridSearchDirectories" Grid.Row="2" Style="{StaticResource SearchAttributeGrid}" ItemsSource="{Binding ActiveSearchInstance.SearchDirectories}">
					<DataGrid.Columns>
						<DataGridTextColumn Binding="{Binding Text}" CellStyle="{StaticResource DataGridCell}" Header="Search Directories" CanUserResize="False" Width="*" />
					</DataGrid.Columns>
				</DataGrid>
				<GridSplitter Grid.Row="3" Height="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" Focusable="False" />
				<DataGrid x:Name="dataGridSearcFiles" Grid.Row="4" Style="{StaticResource SearchAttributeGrid}" ItemsSource="{Binding ActiveSearchInstance.SearchFiles}">
					<DataGrid.Columns>
						<DataGridTextColumn Binding="{Binding Text}" CellStyle="{StaticResource DataGridCell}" Header="Files to Search" CanUserResize="False" Width="*" />
					</DataGrid.Columns>
				</DataGrid>
			</Grid>
			<GridSplitter Grid.Column="1" Width="4" HorizontalAlignment="Center" />
			<Grid Grid.Column="2">
				<Grid.RowDefinitions>
					<RowDefinition Height="122" />
					<RowDefinition Height="Auto" />
					<RowDefinition />
				</Grid.RowDefinitions>

				<!--File List-->
				<DataGrid x:Name="dataGridFileList" BorderBrush="{StaticResource {x:Static SystemColors.ScrollBarBrushKey}}" BorderThickness="1,1,0,1" Background="{StaticResource {x:Static SystemColors.WindowBrushKey}}">
					<DataGrid.Columns>
						<DataGridTextColumn Binding="{x:Null}" ClipboardContentBinding="{x:Null}" Header="File" />
						<DataGridTextColumn Binding="{x:Null}" ClipboardContentBinding="{x:Null}" Header="Size" />
						<DataGridTextColumn Binding="{x:Null}" ClipboardContentBinding="{x:Null}" Header="Date" />
					</DataGrid.Columns>
				</DataGrid>
				<GridSplitter Grid.Row="1" Height="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
				<Border Grid.Row="2" BorderBrush="{StaticResource {x:Static SystemColors.ScrollBarBrushKey}}" BorderThickness="1,1,0,1">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto" />
							<RowDefinition />
						</Grid.RowDefinitions>

						<!--Preview Toolbar-->
						<WrapPanel x:Name="ToolbarPreview" Grid.Row="0" Orientation="Horizontal">
							<WrapPanel.Background>
								<LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
									<GradientStop Color="{StaticResource {x:Static SystemColors.WindowColorKey}}" Offset="0" />
									<GradientStop Color="{StaticResource {x:Static SystemColors.ControlColorKey}}" Offset="1" />
								</LinearGradientBrush>
							</WrapPanel.Background>
							<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Focusable="False">
								<StackPanel Orientation="Horizontal">
									<Image Source="Resources/ImageStartSearch.png" Margin="3" VerticalAlignment="Center" />
								</StackPanel>
							</Button>
							<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Focusable="False">
								<StackPanel Orientation="Horizontal">
									<Image Source="Resources/ImageStartSearch.png" Margin="3" VerticalAlignment="Center" />
								</StackPanel>
							</Button>
							<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Focusable="False">
								<StackPanel Orientation="Horizontal">
									<Image Source="Resources/ImageStartSearch.png" Margin="3" VerticalAlignment="Center" />
								</StackPanel>
							</Button>
							<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Focusable="False">
								<StackPanel Orientation="Horizontal">
									<Image Source="Resources/ImageStartSearch.png" Margin="3" VerticalAlignment="Center" />
								</StackPanel>
							</Button>
							<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Focusable="False">
								<StackPanel Orientation="Horizontal">
									<Image Source="Resources/ImageStartSearch.png" Margin="3" VerticalAlignment="Center" />
								</StackPanel>
							</Button>
						</WrapPanel>

						<!--Preview-->
						<RichTextBox Grid.Row="1" BorderThickness="0" />

					</Grid>
				</Border>
			</Grid>
		</Grid>

		<!--Status Bar-->
		<Grid x:Name="GridStatusbar" Grid.Row="3" Background="{StaticResource {x:Static SystemColors.ControlBrushKey}}">
			<TextBlock Text="Status" Margin="3" />
		</Grid>
		<ListBox x:Name="listBox" ItemsSource="{Binding SearchInstances}" ItemTemplate="{StaticResource ListTemplate}" HorizontalAlignment="Left" Margin="402,41,0,28" Width="169" IsSynchronizedWithCurrentItem="True" Grid.Row="2" />

	</Grid>
</Window>
